# SPDX-License-Identifier: GPL-2.0-only
# SPDX-FileCopyrightText: 2025 Alexander Kurz <akurz@blala.de>
# SPDX-FileCopyrightText: 2012 Freescale Semiconductor, Inc.

# DCD i.MX6sl SoC setup using 512MiB LPDDR2
#
# Initial DCD setup according to
# Kindle_src_5.10.2_3374520058.tar.gz / uboot_2009.08.tar.gz
# board/imx60_wario/flash_header.S

loadaddr 0x80000000
soc imx6
ivtofs 0x400
# CCM
wm 32 0x020c4018 0x00260324

# CCM CGR
wm 32 0x020c4068 0xffffffff
wm 32 0x020c406c 0xffffffff
wm 32 0x020c4070 0xffffffff
wm 32 0x020c4074 0xffffffff
wm 32 0x020c4078 0xffffffff
wm 32 0x020c407c 0xffffffff
wm 32 0x020c4080 0xffffffff
wm 32 0x020c4084 0xffffffff

# IOMUX
wm 32 0x020e0344 0x00003038
wm 32 0x020e0348 0x00003038
wm 32 0x020e034c 0x00003038
wm 32 0x020e0350 0x00003038

wm 32 0x020e030c 0x00000020
wm 32 0x020e0310 0x00000020
wm 32 0x020e0314 0x00000020
wm 32 0x020e0318 0x00000020

wm 32 0x020e0300 0x00000020
wm 32 0x020e031c 0x00000020
wm 32 0x020e0338 0x00000020
wm 32 0x020e0320 0x00080020
wm 32 0x020e032c 0x00080000

wm 32 0x020e0330 0x00000020
wm 32 0x020e0334 0x00000020
wm 32 0x020e033c 0x00000008
wm 32 0x020e0340 0x00000008
wm 32 0x020e0344 0x00003020
wm 32 0x020e0348 0x00003020
wm 32 0x020e034c 0x00003020
wm 32 0x020e0350 0x00003020

wm 32 0x020e032c 0x00000000
wm 32 0x020e05c4 0x00000020
wm 32 0x020e05cc 0x00000020
wm 32 0x020e05d0 0x00080000
wm 32 0x020e05d4 0x00000020
wm 32 0x020e05d8 0x00000020
wm 32 0x020e05ac 0x00000020
wm 32 0x020e05c8 0x00000020
wm 32 0x020e05b0 0x00020000
wm 32 0x020e05b4 0x00000000
wm 32 0x020e05c0 0x00020000
wm 32 0x020e05bc 0x00001000

# MMDC
# MMDC0_MDSCR, set the Configuration request bit during MMDC set up
wm 32 0x021b001c 0x00008000
# LPDDR2 ZQ params
wm 32 0x021b085c 0x1b4700c7
# DDR_PHY_P0_MPZQHWCTRL
wm 32 0x021b0800 0xa1390003
wm 32 0x021b0890 0x00400000
# frc_msr
wm 32 0x021b08b8 0x00000800
# DDR_PHY_P0_MPREDQBY0DL3 - DDR_PHY_P0_MPREDQBY3DL3
wm 32 0x021b081c 0x33333333
wm 32 0x021b0820 0x33333333
wm 32 0x021b0824 0x33333333
wm 32 0x021b0828 0x33333333
wm 32 0x021b082c 0xf3333333
wm 32 0x021b0830 0xf3333333
wm 32 0x021b0834 0xf3333333
wm 32 0x021b0838 0xf3333333
# read calibration
wm 32 0x021b0848 0x4241444a
# write calibration
wm 32 0x021b0850 0x3030312b
# dqs gating dis
wm 32 0x021b083c 0x20000000
wm 32 0x021b0840 0x0
# fine tune duty cyc to low
wm 32 0x021b08c0 0x24911492
# frc_msr
wm 32 0x021b08b8 0x00000800
# MMDC0_MDCFG0, MDPDC, MDCFG1, MDCFG2
wm 32 0x021b000c 0x33374133
wm 32 0x021b0004 0x00020024
wm 32 0x021b0010 0x00100A82
wm 32 0x021b0014 0x00000093
# MMDC0_MDMISC, MDRWD, MDOR
wm 32 0x021b0018 0x00001688
wm 32 0x021b002c 0x0f9f26d2
wm 32 0x021b0030 0x009F0E10
wm 32 0x021b0030 0x00000010
# MMDC0_MDCFG3LP, MDOTC
wm 32 0x021b0038 0x00190778
wm 32 0x021b0008 0x00000000
# CS0_END = 0x9fffffff, 512MB
wm 32 0x021b0040 0x0000004f
# MMDC0_MDCTL, SDE_1 disabled
wm 32 0x021b0000 0x83110000
# MRW
wm 32 0x021b001c 0x003f8030
wm 32 0x021b001c 0xff0a8030
wm 32 0x021b001c 0x82018030
wm 32 0x021b001c 0x04028030
wm 32 0x021b001c 0x03038030
# final DDR setup
wm 32 0x021b0800 0xa1310003
wm 32 0x021b0020 0x00001800
wm 32 0x021b0818 0x00000000
wm 32 0x021b08b8 0x00000800
wm 32 0x021b0004 0x00025564
wm 32 0x021b0404 0x00011006
wm 32 0x021b001c 0x00000000
